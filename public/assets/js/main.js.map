{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\n// ELEMENTOS DEL HTML\n\nconst inputSearch = document.querySelector('.js-input');\nconst btnSearch = document.querySelector('.js-btn-search');\nconst btnReset = document.querySelector('.js-btn-reset');\nconst listSearch = document.querySelector('.js-list-search');\nconst listFavorites = document.querySelector('.js-list-favorites');\nconst btnResetFavorites = document.querySelector('.js-btn-reset-favorites');\n\n// VARIABLES GLOBALES\n\nlet series = [];\nlet favorites = [];\nconst dataLS = JSON.parse(localStorage.getItem('favorites'));\n\n// FUNCIONES\n\nconst resetFavorites = (html) => {\n    if (html !== ''){\n        btnResetFavorites.classList.remove('hidden');\n    } else {\n        btnResetFavorites.classList.add('hidden');\n    }\n}\n\nconst renderSeries = (arraySeries) => {\n    let html = '';\n    let classFavorite = '';\n    for (const oneSerie of arraySeries) {\n        const favoritesFoundIndex = favorites.findIndex((fav) => fav.mal_id === oneSerie.mal_id);\n        console.log(favoritesFoundIndex);\n        if (favoritesFoundIndex !== -1){\n            classFavorite = '--favorite';\n        } else {\n            classFavorite = '--search';\n        }\n        html += `<li class=\"js-serie serie serie${classFavorite}\" id=\"${oneSerie.mal_id}\">`;\n        html += `<h2 class=\"serie__title\">${oneSerie.title}</h2>`;\n        if (oneSerie.images.jpg.image_url === \"https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png\"){\n            oneSerie.images.jpg.image_url = \"https://via.placeholder.com/210x295/ffffff/666666/?text=TV\";\n            html += `<img class=\"serie__img\" src=\"${oneSerie.images.jpg.image_url}\" />`;\n        } else {\n        html += `<img class=\"serie__img\" src=\"${oneSerie.images.jpg.image_url}\" />`;\n         }\n         html += `<div class=\"serie__button--container\"><button class=\"serie__button\"><i class=\"fa-solid fa-heart-circle-plus serie__button--icon-plus fa-2x\"></i></button>`;\n         html += `<button class=\"serie__button\"><i class=\"fa-solid fa-heart-circle-xmark serie__button--icon-remove fa-2x\"></i></button>`;\n         html += `<button class=\"serie__button\"><i class=\"fa-solid fa-heart serie__button--icon fa-2x\"></i></button></div>`;\n         html += `</li>`;\n    }\n    return html;\n};\n\n const renderSeriesSearch = () => {\n    let html= renderSeries(series);\n    listSearch.innerHTML = html;\n    listenerSerie()\n }\n\n const renderSeriesFavorites = () => { \n    let html = renderSeries(favorites);\n    listFavorites.innerHTML = html;\n    resetFavorites(html);\n    localStorage.setItem('favorites', JSON.stringify(favorites));\n    renderSeriesSearch();\n }\n\n\nconst handleSearch = (event) => {\n    event.preventDefault();\n    const inputValue = inputSearch.value.toLowerCase();\n    getDataAPI(inputValue);\n}\n\nconst getDataAPI = (inputValue) => {\n    if (inputValue !== '') {\n    fetch (`https://api.jikan.moe/v4/anime?q=${inputValue}`)\n        .then((response) => response.json())\n        .then ((data) => {\n            series = data.data;\n            renderSeriesSearch();\n            \n    })\n    } else {\n        let html = '';\n        listSearch.innerHTML = html;\n    }\n}\n\nconst handleClick = (event) => {\n   \n    const idSelected = parseInt(event.currentTarget.id);\n    const serieFound = series.find((oneSerie) => oneSerie.mal_id === idSelected);\n    const favoriteFound = favorites.findIndex((fav) => fav.mal_id === idSelected);\n   \n    if (favoriteFound === -1){\n        favorites.push(serieFound);\n    } else {\n        favorites.splice(favoriteFound, 1);\n    }\n    \n    renderSeriesFavorites();\n}\n\nconst handleResetFavorites = () => {\n    let html = '';\n    listFavorites.innerHTML = html;\n    localStorage.clear('favorites');\n    resetFavorites(html);\n}\n\nconst handleReset = () => {\n    let inputValue = inputSearch.value;\n    inputValue = '';\n    getDataAPI(inputValue);\n}\n\nfunction listenerSerie() {\n    const liSeries = document.querySelectorAll('.js-serie');\n    for (const li of liSeries) {\n        li.addEventListener('click', handleClick);\n    }\n}\n\nfunction onLoad() {\n    if (dataLS !== null) {\n        favorites = dataLS;\n        renderSeriesFavorites();\n    } else {\n        listFavorites.innerHTML = '';\n    }\n}\n\nonLoad();\n\n\n//EVENTOS\n\nbtnSearch.addEventListener('click', handleSearch);\ninputSearch.addEventListener('keyup', handleSearch);\nbtnResetFavorites.addEventListener('click', handleResetFavorites);\nbtnReset.addEventListener('click', handleReset);"]}